function add_bar() {
  let urlParams = new URLSearchParams(window.location.search);
  let navbar = document.querySelector('div.index-navbar');

  if (navbar && urlParams.has('project')) {
    let project = decodeURIComponent(urlParams.get('project'));
    let index_root = project + '/.index/';
    let build = project + '/Build/';

    let links = [ { "Extensions": index_root + 'doc/Extensions.html' },
                  { "Debug Log": build + 'debug_log.html' },
                  { "Problems": build + 'problems.html' },
                  { "Source": index_root + 'story.html' },
                  { "Project Index": index_root + 'Index/Welcome.html' } ];
                  let sp = document.createTextNode(" ");
    links.forEach(h => {
      Object.entries(h).forEach(([text, url]) => {
        let a = document.createElement('a');
        let href = document.createAttribute("href");
        href.value = "file://"+url+"?project="+encodeURIComponent(project);
        a.setAttributeNode(href);
        let linktext = document.createTextNode(text);
        a.appendChild(linktext);
        navbar.insertBefore(sp.cloneNode(), navbar.firstChild);
        navbar.insertBefore(a, navbar.firstChild);
        })});
  }
}

document.addEventListener("DOMContentLoaded", add_bar);